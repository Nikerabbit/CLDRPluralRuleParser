<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
	<meta charset="utf-8" />
	<title>CLDR Plural Rule Evaluator</title>
	<meta name="author" content="Santhosh Thottingal" />
	<!-- Libs -->
	<script src="../libs/jquery.js"></script>
</head>

<body>
	<pre></pre>
	<script type="text/javascript">
	"use strict";

	$.ajax({
		type: 'GET',
		url: '../data/plurals.json',
		dataType: 'json'
	}).done(parse);

	function parse( json ) {
		var result, keys, rules, i, key, pluralKeyword, locale, localeRules, rule;

		result = {};
		rules = json.supplemental[ 'plurals-type-cardinal' ];
		keys = Object.keys( rules );
		for ( i = 0; i < keys.length; i++ ) {
			locale = keys[ i ];
			localeRules = rules[ locale ];

			result[ locale ] = {};

			for ( key in localeRules ) {
				if ( !localeRules.hasOwnProperty( key ) ) {
					continue;
				}

				pluralKeyword = key.split( '-' )[2];
				if ( pluralKeyword === 'other' ) {
					continue;
				}

				rule = localeRules[ key ];
				rule = rule.split( '@' )[0].trim();
				result[ locale ][ pluralKeyword ] = rule;
			}
		}

		$( 'pre' ).text(
			JSON.stringify( { pluralRules: result }, undefined, '\t' )
				.replace( /"/g , '\'' )
		);
	}
	</script>
</body>
</html>
